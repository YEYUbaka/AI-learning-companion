# 🚀 启动后端服务 - 完整步骤
# 步骤1：进入backend目录
cd "F:\Cursor projects\Web\backend"

# 步骤2：激活虚拟环境
.\venv\Scripts\activate

# 步骤3：启动服务
uvicorn main:app --reload --port 8000

## ✅ 已完成

1. ✅ 已从 `.env.template` 更新 `.env` 文件
2. ✅ 已打开后端启动窗口

## 📋 启动步骤总结

### 第一步：更新.env文件（已完成）

`.env.template` 文件已经包含了你准备好的所有API密钥：
- ✅ DeepSeek（硅基流动）
- ✅ 文心一言
- ✅ 星火
- ✅ ChatGLM
- ✅ Moonshot

已自动从模板更新到 `.env` 文件。

### 第二步：启动后端服务

**方法1：使用启动脚本（推荐）**
```powershell
cd "F:\Cursor projects\Web\backend"
.\start.bat
```

**方法2：双击启动脚本**
- 在文件资源管理器中打开 `backend` 文件夹
- 双击 `start.bat` 文件

### 第三步：等待启动完成

启动成功后，后端窗口应该显示：
```
INFO:     Uvicorn running on http://127.0.0.1:8000
INFO:     Application startup complete.
✅ 数据库表创建成功
```

## 🔍 验证服务

### 1. 健康检查
访问：http://127.0.0.1:8000/health

### 2. API文档
访问：http://127.0.0.1:8000/docs

### 3. Providers接口
访问：http://127.0.0.1:8000/api/v1/ai/providers

应该返回所有支持的模型列表。

## 🎯 测试模型切换

1. **启动前端**（如果还没启动）：
   ```powershell
   cd "F:\Cursor projects\Web\frontend"
   npm run dev
   ```

2. **访问AI问答页面**：
   http://localhost:5173/ai

3. **选择模型**：
   - 在页面顶部选择不同的模型
   - 发送问题测试

4. **查看后端日志**：
   - 应该看到 `[DEBUG] 使用模型提供商: xxx`
   - 应该看到 `[DEBUG] 调用模型 - Provider: xxx`

## ⚠️ 如果遇到问题

### 问题1：端口被占用
**解决**：关闭占用8000端口的程序，或修改端口号

### 问题2：Python环境错误
**解决**：确保Python 3.10+已安装

### 问题3：依赖未安装
**解决**：启动脚本会自动安装，或手动运行：
```powershell
pip install -r requirements.txt
```

### 问题4：API密钥错误
**解决**：
- 检查 `.env` 文件中的API密钥是否正确
- 确保密钥格式正确（没有引号，没有多余空格）

---

**后端服务应该已经启动了！** 🎉

现在可以：
1. 访问前端页面
2. 选择不同的模型
3. 测试AI问答功能

