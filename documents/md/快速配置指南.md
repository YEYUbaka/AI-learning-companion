# 🚀 快速配置指南 - 如何添加其他API

## 📍 你的当前配置

你已经在使用**硅基流动的DeepSeek API**，配置如下：
```ini
AI_API_KEY=sk-hrrwzmmxydqkpitunkfonggkghnnxoshuakucxarfxczpmab
AI_API_BASE_URL=https://api.siliconflow.cn/v1
AI_MODEL=deepseek-ai/DeepSeek-V3
```

这个配置**已经可以正常使用**，无需修改！

---

## ➕ 如何添加其他API

### 步骤1：打开 .env 文件

在 `backend` 目录下找到 `.env` 文件，用记事本或任何文本编辑器打开。

### 步骤2：添加其他模型的配置

在现有配置后面添加你准备好的API配置。格式如下：

#### 示例：添加文心一言

```ini
# 在文件末尾添加：
WENXIN_API_KEY=你准备好的文心一言API密钥
WENXIN_API_BASE_URL=https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop/chat
WENXIN_MODEL=ernie-bot-turbo
```

#### 示例：添加星火

```ini
XINGHUO_API_KEY=你准备好的星火API密钥
XINGHUO_API_BASE_URL=https://spark-api.xf-yun.com/v1
XINGHUO_MODEL=general
```

#### 示例：添加ChatGLM

```ini
CHATGLM_API_KEY=你准备好的ChatGLM API密钥
CHATGLM_API_BASE_URL=https://open.bigmodel.cn/api/paas/v4
CHATGLM_MODEL=glm-4
```

#### 示例：添加Moonshot

```ini
MOONSHOT_API_KEY=你准备好的Moonshot API密钥
MOONSHOT_API_BASE_URL=https://api.moonshot.cn/v1
MOONSHOT_MODEL=moonshot-v1-8k
```

---

## 📝 完整配置示例

假设你已经准备好了所有API密钥，`.env` 文件应该像这样：

```ini
# AI模型提供商配置
AI_PROVIDER=deepseek

# DeepSeek（硅基流动）- 你当前的配置，保持不变
AI_API_KEY=sk-hrrwzmmxydqkpitunkfonggkghnnxoshuakucxarfxczpmab
AI_API_BASE_URL=https://api.siliconflow.cn/v1
AI_MODEL=deepseek-ai/DeepSeek-V3

# 文心一言 - 替换为你的真实API密钥
WENXIN_API_KEY=你的文心一言API密钥
WENXIN_API_BASE_URL=https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop/chat
WENXIN_MODEL=ernie-bot-turbo

# 星火 - 替换为你的真实API密钥
XINGHUO_API_KEY=你的星火API密钥
XINGHUO_API_BASE_URL=https://spark-api.xf-yun.com/v1
XINGHUO_MODEL=general

# ChatGLM - 替换为你的真实API密钥
CHATGLM_API_KEY=你的ChatGLM API密钥
CHATGLM_API_BASE_URL=https://open.bigmodel.cn/api/paas/v4
CHATGLM_MODEL=glm-4

# Moonshot - 替换为你的真实API密钥
MOONSHOT_API_KEY=你的Moonshot API密钥
MOONSHOT_API_BASE_URL=https://api.moonshot.cn/v1
MOONSHOT_MODEL=moonshot-v1-8k
```

---

## 🎯 如何调用不同的模型

### 方法1：前端UI切换（推荐）✨

1. **配置好API密钥后，重启后端服务**
2. 访问：http://localhost:5173/ai
3. 在页面顶部的"选择模型"下拉框中选择模型
4. 直接提问，系统会使用你选择的模型

### 方法2：修改默认模型

如果你想默认使用某个模型，修改 `.env` 文件：

```ini
# 改为你想默认使用的模型
AI_PROVIDER=wenxin    # 或 xinghuo, chatglm, moonshot
```

然后**重启后端服务**。

---

## ⚠️ 重要提示

### 1. API密钥格式
- ✅ **正确**：`WENXIN_API_KEY=abc123def456`
- ❌ **错误**：`WENXIN_API_KEY="abc123def456"`（不要加引号）
- ❌ **错误**：`WENXIN_API_KEY = abc123def456`（不要有空格）

### 2. 配置后必须重启后端
- 修改 `.env` 文件后
- 必须重启后端服务才能生效
- 前端UI切换不需要重启

### 3. 可以只配置部分模型
- 不需要配置所有模型
- 只配置你想使用的模型即可
- 前端UI只会显示已配置的模型

---

## 🧪 测试步骤

### 1. 配置API密钥
编辑 `.env` 文件，添加你准备好的API密钥

### 2. 重启后端服务
```powershell
# 停止当前后端服务（Ctrl+C）
# 然后重新启动
cd backend
.\start.bat
```

### 3. 测试前端切换
1. 访问：http://localhost:5173/ai
2. 查看"选择模型"下拉框
3. 选择不同的模型
4. 发送问题测试

### 4. 检查是否成功
- 如果模型选择器中有你配置的模型，说明配置成功
- 如果选择模型后能正常回答，说明API密钥正确
- 如果显示错误，检查API密钥是否正确

---

## 📋 配置检查清单

- [ ] 打开 `backend/.env` 文件
- [ ] 添加你准备好的API密钥（替换 `your_xxx_api_key_here`）
- [ ] 保存文件
- [ ] 重启后端服务
- [ ] 访问前端页面
- [ ] 在模型选择器中选择模型
- [ ] 测试提问

---

## 🆘 常见问题

### Q: 如何知道API密钥是否正确？
A: 选择模型后发送一个问题，如果返回错误提示"未配置XXX_API_KEY"，说明密钥未配置或配置错误。

### Q: 前端看不到我配置的模型？
A: 
1. 检查 `.env` 文件中的配置是否正确
2. 确认已重启后端服务
3. 访问 http://127.0.0.1:8000/api/v1/ai/providers 查看支持的模型

### Q: 可以同时配置多个模型吗？
A: 可以！配置多少个都可以，前端会自动显示所有已配置的模型。

### Q: 只配置一个模型可以吗？
A: 可以！只配置你想使用的模型即可。

---

**现在就去编辑 `.env` 文件，添加你的API密钥吧！** 🔑

